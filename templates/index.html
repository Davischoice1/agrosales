<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Agricultural Sales Prediction</title>
    <style>
        /* Background image blur layer */
        .background-blur {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: url('{{ url_for("static", filename="anjorin.jpg") }}');
            background-size: cover;
            background-position: center;
            z-index: -1;
            filter: blur(8px);
            transform: scale(1.1);
        }

        body {
            margin: 0;
            font-family: 'Segoe UI', sans-serif;
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            background-color: rgba(255, 255, 255, 0.5);
        }

        .container {
            background-color: rgba(240, 255, 245, 0.95); /* light greenish */
            padding: 35px 30px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.15);
            width: 90%;
            max-width: 550px;
            margin: 30px;
            z-index: 1;
        }

        h1 {
            text-align: center;
            color: #2d6a4f;
            margin-bottom: 10px;
        }

        p {
            text-align: center;
            font-size: 14px;
            color: #444;
            margin-bottom: 25px;
        }

        label {
            display: block;
            margin-top: 18px;
            font-weight: bold;
            color: #1b4332;
        }

        .input-with-dropdown {
            display: flex;
            margin-top: 6px;
            border: 1px solid #ccc;
            border-radius: 6px;
            overflow: hidden;
        }

        .input-with-dropdown input,
        .input-with-dropdown select {
            border: none;
            padding: 10px;
            font-size: 14px;
            width: 100%;
        }

        .input-with-dropdown input {
            flex: 70%;
            border-right: 1px solid #ccc;
        }

        .input-with-dropdown select {
            flex: 30%;
            background-color: #f0f0f0;
        }

        input[type="number"],
        input[type="text"] {
            width: 100%;
            padding: 10px;
            margin-top: 5px;
            border-radius: 6px;
            border: 1px solid #ccc;
        }

        button {
            width: 100%;
            padding: 12px;
            margin-top: 25px;
            background-color: #2d6a4f;
            color: white;
            font-size: 16px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
        }

        button:hover {
            background-color: #1b4332;
        }

        .clear-button {
            background-color: #cccccc;
            color: black;
            margin-top: 10px;
        }

        .result {
            margin-top: 25px;
            padding: 15px;
            background-color: #d8f3dc;
            color: #1b4332;
            border-left: 5px solid #52b788;
            border-radius: 6px;
            font-weight: bold;
        }

        details {
            margin-top: 15px;
            font-size: 0.95em;
            color: #444;
        }

        @media (max-width: 600px) {
            .container {
                padding: 25px 20px;
            }

            .input-with-dropdown {
                flex-direction: column;
            }

            .input-with-dropdown input,
            .input-with-dropdown select {
                width: 100%;
                flex: 100%;
                border-right: none;
            }

            .input-with-dropdown input {
                border-bottom: 1px solid #ccc;
            }
        }
    </style>
</head>
<body>

<div class="background-blur"></div>

<div class="container">
    <h1>Agricultural Product Sales Forecast</h1>
    <p>Predict the expected quantity of agricultural products (in kilograms) that will be sold based on your specific inputs such as product type, price per kg, shipment volume, stock on hand, and sales month.
    This tool helps you make data-driven decisions by estimating future demand using machine learning.</p>

    <form method="POST" action="/predict">
        <label>Product Name:</label>
        <div class="input-with-dropdown">
            <input type="text" name="product" placeholder="Enter product"
                   value="{{ form_data.product if form_data and form_data.product else '' }}">
            <select name="product_select">
                <option value="">-- Or choose from list --</option>
                {% for p in products %}
                    <option value="{{ p }}">{{ p }}</option>
                {% endfor %}
            </select>
        </div>

        <label>Units Shipped (kg):</label>
        <div class="input-with-dropdown">
            <input type="number" name="units_shipped_kg" step="0.5" placeholder="e.g. 200.5"
                   value="{{ form_data.units_shipped_kg if form_data and form_data.units_shipped_kg else '' }}">
            <select name="units_shipped_select">
                <option value="">-- Or choose --</option>
                {% for i in range(1, 2001) %}
                    <option value="{{ i * 0.5 }}">{{ i * 0.5 }}</option>
                {% endfor %}
            </select>
        </div>

        <label>Units On Hand (kg):</label>
        <div class="input-with-dropdown">
            <input type="number" name="units_on_hand_kg" step="0.5" placeholder="e.g. 100.5"
                   value="{{ form_data.units_on_hand_kg if form_data and form_data.units_on_hand_kg else '' }}">
            <select name="units_on_hand_select">
                <option value="">-- Or choose --</option>
                {% for i in range(1, 2001) %}
                    <option value="{{ i * 0.5 }}">{{ i * 0.5 }}</option>
                {% endfor %}
            </select>
        </div>

        <label>Price per kg (â‚¦):</label>
        <input type="number" name="price_per_kg" step="0.01" placeholder="e.g. 450" required
               value="{{ form_data.price_per_kg if form_data and form_data.price_per_kg else '' }}">

        <label>Month:</label>
        <div class="input-with-dropdown">
            <input type="text" name="month" placeholder="Enter month"
                   value="{{ form_data.month if form_data and form_data.month else '' }}">
            <select name="month_select">
                <option value="">-- Or choose --</option>
                {% for m in months %}
                    <option value="{{ m }}">{{ m }}</option>
                {% endfor %}
            </select>
        </div>

        <button type="submit">Predict</button>
        <a href="/" style="text-decoration: none;">
            <button type="button" class="clear-button">Clear</button>
        </a>
    </form>

    {% if prediction %}
        <div class="result">{{ prediction|safe }}</div>
        <details>
            <summary>What does this mean?</summary>
            The prediction is an estimate based on your inputs. The confidence interval shows a range the actual value is likely to fall within.
        </details>
    {% endif %}
</div>

</body>
</html>
